id: organisations
label: XML feed of organisations
migration_group: organisations
source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: xml
  urls:
    - https://drive.google.com/uc?export=download&id=0B0o4prxPrMJsU2xxa3ZOUUxGSEE
  item_selector: /DATABASE_BIB/RECORD
  fields:
    -
      name: organisation_id
      label: ID
      selector: IDZapisa
    -
      name: organisation
      label: Organisation
      selector: Institucija
    -
      name: address
      label: Address
      selector: Adresa
    -
      name: organisation_group_id
      label: Skupna razina ID
      selector: SkupnaRazina_ID
    -
      name: web_site_url
      label: URL
      selector: URL
    -
      name: komunikacije
      label: Komunikacije
      selector: Komunikacije
    -
      name: area_of_activity_id
      label: Area of activity
      selector: PodrucjeDjelatnosti_ID
    -
      name: function_upholder_id
      label: Function Upholder ID
      selector: NositeljFunkcije_ID
    -
      name: function
      label: Function
      selector: Funkcija
      # this field is not beeing imported it is here
      # just so we know if we need to skip this row
    -
      name: skupna_razina
      label: Skupna razina
      selector: SkupnaRazina
  ids:
    organisation_id:
      type: integer
process:
  title: organisation
  type:
    plugin: default_value
    default_value: organisation
  uid:
    plugin: default_value
    default_value: 1
  field_o_web_site: web_site_url
  field_o_organisation_id: organisation_id
  field_o_organisation_group:
    plugin: field_o_organisation_group
    source: organisation_group_id
  field_o_parent_organisation:
    plugin: field_o_parent_organisation
    source: organisation_group_id
  field_o_area_of_activity:
    plugin: field_o_area_of_activity
    source: area_of_activity_id
  field_o_email:
    plugin: field_o_email
    source: komunikacije
  field_o_telephone:
    plugin: field_o_telephone
    source: komunikacije
  field_o_fax:
    plugin: field_o_fax
    source: komunikacije
  field_o_address:
    plugin: field_o_address
    source: address
destination:
  plugin: entity:node
dependencies:
  enforced:
    module:
      - import_organisations
migration_dependencies:
  required:
    - area_of_activity
    - functions
    - people
    - organisation_groups